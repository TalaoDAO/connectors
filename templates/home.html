
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MCP Server for Data Wallets – Connect EUDI & Talao wallets to AI agents</title>

  <!-- SEO / Social -->
  <meta name="description" content="Expose OIDC4VP wallet verification to AI agents via the Model Context Protocol (MCP). Pull-based flow, works with EUDI-compliant wallets like Talao." />
  <meta property="og:title" content="MCP Server for Data Wallets" />
  <meta property="og:description" content="Let AI agents authenticate users with their EUDI-compliant wallet (e.g., Talao) using MCP + OIDC4VP (pull model)." />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Fonts / Shared header styles (same as menu.html) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='header.css') }}">

  <style>
    :root{
      --bg: #f7f9fc;
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --accent: #0ea5b0;
      --ring: rgba(14,165,176,.35);
      --code-bg: #0b1220;
      --code-fg: #e5f7ff;
    }
    *{ box-sizing: border-box; }
    body{ margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; color:var(--text); background:var(--bg); }
    a{ color: var(--accent); text-decoration: none; }
    a:focus, button:focus{ outline: 3px solid var(--ring); outline-offset: 2px; }
    code,kbd,samp{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: .95em; }
    pre{ background: var(--code-bg); color: var(--code-fg); border-radius: 12px; padding: 1rem 1.1rem; overflow:auto; box-shadow: inset 0 0 0 1px rgba(255,255,255,.06); }
    .copy{ border: 1px solid #cde9ee; background:#fff; padding: .5rem .75rem; border-radius: 8px; font-weight:600; cursor: pointer; }
    .chip{ display:inline-flex; align-items:center; gap:.4rem; background:#ecfeff; color:#065f66; padding:.35rem .6rem; border-radius:999px; border:1px solid #c8f1f5; font-weight:600; }

    /* --- HERO / SECTIONS --- */
    .hero{ text-align:center; padding: 5rem 1.5rem 4rem; background: linear-gradient(180deg, #ffffff 0%, #eef8f8 100%); }
    .badge{ display:inline-block; padding:.35rem .6rem; border-radius:999px; background: #e6fbff; color:#036b77; font-weight:600; letter-spacing:.2px; }
    .main-title{ font-family: 'Orbitron', ui-sans-serif, system-ui; font-size: clamp(2.1rem, 4vw, 3.25rem); margin:.75rem 0; color:#082a2f; }
    .subtitle{ font-size: clamp(1rem, 2.2vw, 1.15rem); color:var(--muted); max-width: 880px; margin: 0 auto 1.25rem; }
    .cta{ margin-top: 1.5rem; display:flex; gap:.75rem; justify-content:center; flex-wrap:wrap; }
    .btn{ display:inline-block; padding:.8rem 1.2rem; border-radius: 10px; font-weight:700; text-decoration:none; border:1px solid transparent; cursor:pointer; }
    .btn.primary{ background: var(--accent); color:#fff; transition: transform .15s, box-shadow .25s; }
    .btn.primary:hover{ transform: translateY(-2px); box-shadow: 0 8px 24px rgba(14,165,176,.22); }
    .btn.secondary{ background:#fff; border-color:#cfe7ec; color:#064b53; }

    .section{ max-width:1200px; margin: 3rem auto; padding: 0 1rem; }
    .section h2{ text-align:center; font-size: clamp(1.5rem, 3vw, 2.25rem); margin-bottom: 1.25rem; color:#082a2f; }

    .feature-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1.25rem; }
    .card{ background:var(--card); border:1px solid #e5e7eb; border-radius: 16px; padding: 1.2rem 1.25rem 1.35rem; box-shadow: 0 1px 3px rgba(0,0,0,.04); transition: transform .18s, box-shadow .18s; }
    .card:hover{ transform: translateY(-4px); box-shadow: 0 10px 25px rgba(0,0,0,.10); }
    .card h3{ margin:.25rem 0 .5rem; color:#082a2f; font-size:1.12rem; }
    .card p{ margin:0; color:#3d4a57; font-size:.98rem; }
    .card .actions{ margin-top: .9rem; display:flex; gap:.5rem; flex-wrap:wrap; }

    .how{ display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1rem; counter-reset: step; }
    .how .step{ background:#ffffff; border:1px solid #e5e7eb; border-radius: 14px; padding: 1rem 1.1rem; }
    .how .step h4::before{ counter-increment: step; content: counter(step) ". "; color: var(--accent); }
    .how .step h4{ margin:.25rem 0 .5rem; }
    .how .step p{ margin:0; color:#4b5563; }

    .logos{ display:flex; gap:1.25rem; flex-wrap:wrap; justify-content:center; align-items:center; opacity:.95; }
    .logos .chip{ margin:.25rem; }

    .cta-bottom{ text-align:center; padding: 2.5rem 1rem 3.25rem; }
    .flashes{ max-width: 900px; margin: .75rem auto 0; padding: .5rem 1rem; background:#fff7ed; border:1px solid #fed7aa; color:#9a3412; border-radius: 8px; }

    .two-col{ display:grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 1.25rem; align-items:start; }
    .note{ font-size:.95rem; color:#5b6470; }
    .kbd{ background:#eef7f8; padding:.15rem .45rem; border-radius:6px; border:1px solid #cde9ee; }
  </style>
</head>
<body>

  <!-- HEADER — keep parity with shared menu/header include -->
  <header>
    <div class="logo">
      <strong><a href="/" style="color: var(--primary); text-decoration: none;">WALLET-CONNECTORS.COM</a></strong>
    </div>
    <nav></nav>
  </header>

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div class="flashes" role="status">
        {% for message in messages %}
          <p>{{ message }}</p>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <main id="content" role="main" aria-label="MCP server homepage">
    <section class="hero" aria-labelledby="hero-title">
      <span class="badge">MCP • OIDC4VP • EUDI</span>
      <h1 id="hero-title" class="main-title">MCP server for data wallet</h1>
      <p class="subtitle">Authenticate users with their <strong>EUDI‑compliant wallet</strong> (e.g., <strong>Talao</strong>). This server exposes your verifier APIs via the <strong>Model Context Protocol</strong> using a <strong>pull</strong> model (no webhooks).</p>
      <div class="cta" role="group" aria-label="Primary actions">
        <a class="btn primary" href="/mcp/info">MCP info</a>
        <a class="btn secondary" href="#quickstart">Quick start</a>
        <a class="btn secondary" href="/verifier/select/sandbox">Register / Sign‑In</a>
      </div>
    </section>

    <section class="section" aria-labelledby="what">
      <h2 id="what">What is this?</h2>
      <div class="two-col">
        <div class="card">
          <h3>Connect wallets to agents</h3>
          <p>Agents can initiate a verifiable presentation with a user’s wallet, show a deep link / QR, then poll for verification and retrieve claims — all through MCP tools.</p>
          <ul>
            <li>Works with <span class="chip">EUDI‑compliant wallets</span> such as <span class="chip"><a href="https://www.talao.io/talao-wallet/">Talao</a></span>.</li>
            <li>Bridges <strong>wallets</strong> through an OIDC4VP verifier to AI agents.</li>
            <li>Designed for <strong>App‑to‑Agent</strong> (A2A) workflows.</li>
          </ul>
        </div>
        <div class="card">
          <h3>Exposed MCP tools</h3>
          <ul>
            <li><code>start_wallet_verification</code> — create an OIDC4VP request; returns <code>openid4vp://</code> deeplink and a QR (image block + structuredContent).</li>
            <li><code>poll_wallet_verification</code> — check status (<em>pending</em>, <em>verified</em>, <em>denied</em>) and fetch wallet data (structuredContent).</li>
            <li><code>revoke_wallet_flow</code> — acknowledge flow cleanup (TTL handled server‑side).</li>
          </ul>
          <p class="note">Calls are protected with <code>X-API-KEY</code> (the MCP client must send your verifier secret).</p>
        </div>
      </div>
    </section>

    <section class="section" aria-labelledby="how">
      <h2 id="how">How it works</h2>
      <div class="how">
        <div class="step">
          <h4>Agent calls <code>start_wallet_verification</code></h4>
          <p>The MCP client requests a presentation from a user wallet with a scope such as email, profile, phone... and returns a deep link and QR.</p>
        </div>
        <div class="step">
          <h4>User opens wallet</h4>
          <p>The agent shows the QR or link to the user. The user scans with their wallet and eventually consents to share their data.</p>
        </div>
        <div class="step">
          <h4>Agent polls</h4>
          <p>Agent calls <code>poll_wallet_verification</code> with the <code>session_id</code> until status changes from <em>pending</em>.</p>
        </div>
        <div class="step">
          <h4>Claims available</h4>
          <p>When verified, the server returns user verifiable data and metadata.</p>
        </div>
      </div>
    </section>

    <section id="quickstart" class="section" aria-labelledby="quickstart-title">
      <h2 id="quickstart-title">Quick start (curl)</h2>
      <p class="note">Use public test profiles: <code>verifier_id</code> ∈ { <strong>0000</strong>, <strong>0001</strong>, <strong>0002</strong> }; the <code>X-API-KEY</code> equals the <code>verifier_id</code>. Register to setup specific wallet profile and get your own <code>verifier_id</code> and secret.</p>
      <div class="two-col">
        <div class="card">
<pre><code class="language-bash"># 1) List tools
curl -s https://wallet-connectors.com/mcp \
  -H 'Content-Type: application/json' \
  -d '{"jsonrpc":"2.0","id":1,"method":"tools/list"}' | jq

# 2) Start verification (server can generate session_id)
curl -s https://wallet-connectors.com/mcp \
  -H 'Content-Type: application/json' \
  -H 'X-API-KEY: &lt;X-API-KEY&gt;' \
  -d '{
    "jsonrpc":"2.0",
    "id":2,
    "method":"tools/call",
    "params":{
      "name":"start_wallet_verification",
      "arguments":{"verifier_id":"0000","scope":"profile"}
    }
  }' | jq

# 3) Poll (use session_id from step 2 → result.structuredContent.session_id)
curl -s https://wallet-connectors.com/mcp \
  -H 'Content-Type: application/json' \
  -H 'X-API-KEY: &lt;X-API-KEY&gt;' \
  -d '{
    "jsonrpc":"2.0",
    "id":3,
    "method":"tools/call",
    "params":{
      "name":"poll_wallet_verification",
      "arguments":{"session_id":"3e02ac7e-da66-4dd1-9abe-30348dcc728f"}
    }
  }' | jq</code></pre>
        </div>
        <div class="card">
<pre><code class="language-json">{
  "jsonrpc": "2.0",
  "method": "tools/call",
  "params": {
    "name": "start_wallet_verification",
    "arguments": {
      "verifier_id": "0000",
      "session_id": "3e02ac7e-da66-4dd1-9abe-30348dcc728f",
      "scope": "profile"
    }
  },
  "id": 2
}</code></pre>
          <p class="note">If you omit <code>session_id</code>, the server will generate one.</p>
        </div>
      </div>
      <div class="card" style="margin-top:1rem;">
        <h3>Understanding responses</h3>
        <p>The MCP server returns <code>result.content</code> (array of blocks) and <code>result.structuredContent</code> (machine JSON).</p>
<pre><code class="language-json">{
  "result": {
    "content": [
      {"type":"image","data":"&lt;base64png&gt;","mimeType":"image/png"},
      {"type":"text","text":"Scan the QR code or open wallet link: openid4vp://....."}
    ],
    "structuredContent": {
      "session_id": "3e02ac7e-da66-4dd1-9abe-30348dcc728f",
      "deeplink_url": "openid4vp://.....?request_uri=https://.../request_uri/abc",
      "pull_url": "https://wallet-connectors.com/verifier/wallet/pull/3e02..."
    }
  }
}</code></pre>
      </div>
    </section>

    <section class="section" aria-labelledby="security">
      <h2 id="security">Security & privacy</h2>
      <div class="feature-grid">
        <article class="card">
          <h3>Least‑privilege MCP</h3>
          <p>Only the start/poll/revoke actions are exposed to agents.</p>
        </article>
        <article class="card">
          <h3>Token redaction</h3>
          <p>Raw <code>vp_token</code> and <code>id_token</code> are checked according to standards and trust registries. MCP responses are simple to use.</p>
        </article>
        <article class="card">
          <h3>TTL‑based cleanup</h3>
          <p>Flows expire automatically in the verifier backend (Redis TTL). No data are stored on servers.</p>
        </article>
      </div>
    </section>

    <section class="section cta-bottom" aria-labelledby="start">
      <h2 id="start">Ready to connect a wallet to your agent?</h2>
      <p class="subtitle">Authenticate users with their <strong>EUDI‑compliant wallet</strong> (e.g., <strong>Talao</strong>). This server exposes your verifier APIs via the <strong>Model Context Protocol</strong> using a <strong>pull</strong> model (no webhooks).</p>
      <div class="cta">
        <a class="btn secondary" href="/mcp/tools_list">MCP tools</a>
        <a class="btn secondary" href="/documentation/verifier_agents_mcp">Read docs</a>
      </div>
    </section>
  </main>

  {% include "footer.html" %}

</body>
</html>
